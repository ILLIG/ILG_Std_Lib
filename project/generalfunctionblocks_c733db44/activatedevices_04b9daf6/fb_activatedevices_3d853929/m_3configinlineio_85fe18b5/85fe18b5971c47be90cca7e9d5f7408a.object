{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)85fe18b5-971c-47be-90cc-a7e9d5f7408a","ParentGuid":"(Guid)3d853929-dfea-49d3-9ccd-f0b5d5e9e6d3","Name":"(string)M_3ConfigInlineIO","Properties":{"@Type":"2c41fa04:IDictionary","@Value":[{"@Key":"(Guid)24568a24-c491-472c-a21f-ee5d33859fab","@Value":{"@Type":"24568a24","@Value":{"MemoryReserveForOnlineChange":"(int)0","ExcludeFromBuild":"(bool)False","External":"(bool)False","EnableSystemCall":"(bool)False","CompilerDefines":"(string)","LinkAlways":"(bool)False","Undefines":{"@Type":"[string]","@Value":[]}}}}]},"TypeGuid":"(Guid)f8a58466-d7f6-439f-bbb8-d4600e41d099","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"24568a24":"{24568a24-c491-472c-a21f-ee5d33859fab}","2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","bool":"System.Boolean","Guid":"System.Guid","int":"System.Int32","string":"System.String"}},"object":{"Graph":{"@Type":"f8a58466","@Value":{"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)\nCASE iState OF\t\t\n\t\t\t\t\t\n\t300:\n\t\tM_DelStructure(ADR(refastInlineIOConfigError), SIZEOF(refastInlineIOConfigError));\n\t\tIF IN_bCheckInlineIOConfig THEN\n\t\t\tiState := 310;\n\t\tELSIF IN_bConfigInlineIO THEN\n\t\t\tiState := 350;\n\t\tELSE\n\t\t\tiState := 399;\n\t\tEND_IF\n\n(* ################################################################################ *)\t\n\t// Check if Configuration is OK\n(* ################################################################################ *)\t\t\t\n\t310:\n\t\tk:= 1;\n\t\tFOR i := 1 TO iMAX_INLINE_IO DO\n\t\t\tIF refastInlineIOActConfig[i].bAvailable THEN\t\n\t\t\t\trefastInlineIOConfigError[i].bIOFoundAndNotConfigured := TRUE;\n\t\t\t\trefastInlineIOConfigError[i].sName := '';\n\t\n\t\t\t\tFOR j := k TO iMAX_INLINE_IO DO\n\t\t\t\t\tIF refastInlineIOActConfig[i].bAvailable AND refastInlineIOCmdConfig[j].bActive AND refastInlineIOCmdConfig[j].bConfigured THEN \n\t\t\t\t\t\t// Wrong IO Type\n\t\t\t\t\t\tIF NOT (refastInlineIOActConfig[i].eIOType = refastInlineIOCmdConfig[j].eIOType) THEN\n\t\t\t\t\t\t\trefastInlineIOConfigError[i].bWrongIOType := TRUE;\n\t\t\t\t\t\t\trefastInlineIOConfigError[i].sName := refastInlineIOCmdConfig[j].sName;\n\t\t\t\t\t\tEND_IF\n\t\t\t\t\t\tk := j+1;\t\t\t\t\t\t\t\t\t// save index \n\t\t\t\t\t\trefastInlineIOConfigError[i].bIOFoundAndNotConfigured := FALSE;\n\t\t\t\t\t\tj := iMAX_SERCOS_IO +1; \t\t// End LOOP\n\t\t\t\t\tEND_IF\t\n\t\t\t\tEND_FOR\n\t\t\tELSE\t\n\t\t\t\ti := \tiMAX_SERCOS_IO +1;  // End LOOP\n\t\t\tEND_IF\t\n\t\tEND_FOR\n\n\t// Are there still some IO configured which where not found on the Inline Bus?\n\t\tIF k <= iMAX_INLINE_IO THEN\n\t\t\tFOR j := k TO iMAX_INLINE_IO DO\n\t\t\t\tIF refastInlineIOCmdConfig[j].bActive THEN\n \t\t\t\t\trefastInlineIOConfigError[j].bIOConfiguredAndNotFound := TRUE;\n\t\t\t\t\trefastInlineIOConfigError[j].sName := refastInlineIOCmdConfig[j].sName;\n\t\t\t\tEND_IF\n\t\t\tEND_FOR\n\t\tEND_IF\t\n\t\n\t\tiState := 320;\n\t\t\n(* ################################################################################ *)\t\n\t// generate Error if necessary \n(* ################################################################################ *)\t\n\t320:\n\t\tFOR i := 1 TO iMAX_INLINE_IO DO\n\t\t\tIF refastInlineIOConfigError[i].bWrongIOType\t\n\t\t\t\tOR refastInlineIOConfigError[i].bIOFoundAndNotConfigured \n\t\t\t\tOR refastInlineIOConfigError[i].bIOConfiguredAndNotFound THEN\n\t\t\t\t\trefastInlineIOConfigError[i].bError := TRUE;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tbErrorTemp := TRUE;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t// Create Error Message\n\t\t\t\t\trefastInlineIOConfigError[i].sErrorMessage := 'Inline IO ';\n\t\t\t\t\tsTemp2 := refastInlineIOConfigError[i].sName ;\n\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(SercosIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\tsTemp2 :=  ' Slot '; ;\n\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(InlineIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\tsTemp2 := INT_TO_STRING(i);\n\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(InlineIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\tsTemp2 := ' shows error: ';\n\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(InlineIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\tsTemp2 :='';\n\t\t\t\t\tIF refastInlineIOConfigError[i].bWrongIOType\tTHEN\n\t\t\t\t\t\tsTemp2 :='wrong IO Type';\n\t\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(InlineIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\t\tsTemp2 :=', ';\n\t\t\t\t\tEND_IF\n\t\t\t\t\t\n\t\t\t\t\tIF refastInlineIOConfigError[i].bIOConfiguredAndNotFound\tTHEN\n\t\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(InlineIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\t\tsTemp2 :='configured but not found';\n\t\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(InlineIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\t\tsTemp2 :=', ';\n\t\t\t\t\tEND_IF\n\t\t\t\t\t\n\t\t\t\t\tIF refastInlineIOConfigError[i].bIOFoundAndNotConfigured\tTHEN\n\t\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(InlineIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\t\tsTemp2 :='found but not configured in DeviceCmdConfig';\n\t\t\t\t\t\t//strConcat(ADR\t(InlineIOConfigError[i].ErrorMessage), SIZEOF(InlineIOConfigError[i].ErrorMessage) ,\tADR(strTemp));\n\t\t\t\t\t\tIL_CONCAT(ADR(refastInlineIOConfigError[i].sErrorMessage), ADR(sTemp2), ADR(refastInlineIOConfigError[i].sErrorMessage), SIZEOF(refastSercosIOConfigError[i].sErrorMessage));\n\t\t\t\t\t\tsTemp2 :=', ';\n\t\t\t\t\tEND_IF\t\n\t\t\t\t\t\n\t\t\t\t\tML_SetDiagEntry(\n\t\t\t\t\t\tSeverity:= enSeverity, \n\t\t\t\t\t\tClass:= enClass, \n\t\t\t\t\t\tFacility:= E_LOG_FACILITY.USER, \n\t\t\t\t\t\tCode:= wDIAG_CODE, \n\t\t\t\t\t\tText:= ADR(refastInlineIOConfigError[i].sErrorMessage));\n\t\t\t\t\t\n\t\t\t\t\tIF sDiagMessageInt = '' THEN\n\t\t\t\t\t\tsDiagMessageInt := refastInlineIOConfigError[i].sErrorMessage;\n\t\t\t\t\tEND_IF\t\t\t\n\t\t\t\t\t\t\n\t\t\tEND_IF\n\t\tEND_FOR\n\t\t\t\n\t\tIF bErrorTemp THEN  \n\t\t\tOUT_ErrorID := \tRESOURCE_ERROR;\n\t\t\tOUT_ErrorIdent.Table :=\tUSER1_TABLE;       \n\t\t\tOUT_ErrorIdent.Additional1 := 16#F0005;\n\t\t\tOUT_ErrorIdent.Additional2 := 16#F0000;\n\n\t\t\tiState \t\t:= 998;\n\t\tELSIF IN_bConfigInlineIO THEN\n\t\t\tiState \t\t:= 350;\n\t\tELSE\t\n\t\t\tiState \t\t:= 399;\n\t\tEND_IF\t\t\n\t\n\t\t\t\n(* ################################################################################ *)\t\n\t// create String for UserDefs.cfg\n(* ################################################################################ *)\t\t\t\t\n\t350:\n\t\t(* Example:\n\t;---------- Master.0 ----------\n\t[InlineIO.Master.0]\n\tModuleDeactPosi = 3\n\tModuleDeactPosi = 7\n\tModuleDeactPosi = 15\n\tModuleDeactPosi = 16\n\t;------------------------------\n\n\t\t*)\n\n\t\t//\tHeader\n\t\tasStringCmdCfg[iLineCfg] := ';--------------- Inline IO --------------- ';\n\t\tiLineCfg := iLineCfg + 1;\t \t// next line\n\t\tasStringCmdCfg[iLineCfg] := '[InlineIO.Master.0]'\t;\n\t\tiLineCfg := iLineCfg +1;\t \t// next line\n\t\t\n\t\tFOR i := 1 TO iMAX_INLINE_IO DO\n\t\t\tIF refastInlineIOCmdConfig[i].bConfigured THEN \n\t\t\t\tIF refastInlineIOCmdConfig[i].bActive THEN\n\t\t\t\t\tasStringCmdCfg[iLineCfg] := '; ';\n\t\t\t\tELSE\t\t\t\n\t\t\t\t\tasStringCmdCfg[iLineCfg] := '';\n\t\t\t\tEND_IF\t\n\t\t\t\t\n\t\t\t\tsTemp2 := 'ModuleDeactPosi = ';\n\t\t\t\t//strConcat(ADR\t(arStringCmdCfg[iLineCfg]), SIZEOF(arStringCmdCfg[iLineCfg]) ,\tADR(strTemp));\n\t\t\t\tIL_CONCAT(ADR\t(asStringCmdCfg[iLineCfg]), ADR(sTemp2), ADR\t(asStringCmdCfg[iLineCfg]), SIZEOF(asStringCmdCfg[iLineCfg]));\n\t\t\t\tsTemp2 := INT_TO_STRING (i);\n\t\t\t\t//strConcat(ADR\t(arStringCmdCfg[iLineCfg]), SIZEOF(arStringCmdCfg[iLineCfg]) ,\tADR(strTemp));\n\t\t\t\tIL_CONCAT(ADR\t(asStringCmdCfg[iLineCfg]), ADR(sTemp2), ADR\t(asStringCmdCfg[iLineCfg]), SIZEOF(asStringCmdCfg[iLineCfg]));\n\t\t\t\t\n\t\t\t\tIF NOT (asStringCmdCfg[iLineCfg] = asStringActCfg[iLineCfg]) THEN\n\t\t\t\t\tOUT_bReboot := TRUE;\n\t\t\t\tEND_IF\n\t\t\t\n\t\t\t\tiLineCfg := iLineCfg +1; \t// next line\n\t\t\t\t\n\t\t\tELSIF NOT refastInlineIOCmdConfig[i].bConfigured  THEN\n\t\t\t\t// End LOOP\n\t \t\t\ti := iMAX_INLINE_IO + 1;\t\n\t\t\tEND_IF\t\n\t\t\t\n\t\t\t\n\t\tEND_FOR\n\t\t\n\t\tasStringCmdCfg[iLineCfg] := ';-----------------------------------------'\t;\n\t\tiLineCfg := iLineCfg +1;\t \t// next line\n\n\t\tasStringCmdCfg[iLineCfg] := ''\t;\n\t\tiLineCfg := iLineCfg +1;\t \t// next line\n\t\t\n\t\tiEOF := iLineCfg -1 ;\t\t\t//End Of File\n\t\tiState := 399;\n\t\t\n(* ################################################################################ *)\t\n\t// End\n(* ################################################################################ *)\t\t\t\t\t\n\t399:\n\t\tiState := 400;\t\t\n\nEND_CASE","LineInfoPersistence":"(string)85fe18b5-971c-47be-90cc-a7e9d5f7408a_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)METHOD M_3ConfigInlineIO : BOOL\n","LineInfoPersistence":"(string)85fe18b5-971c-47be-90cc-a7e9d5f7408a_Decl_LineIds"}}}}}},"TypeInfos":{"3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","f8a58466":"{f8a58466-d7f6-439f-bbb8-d4600e41d099}","string":"System.String"}}},"FormatVersion":"1.0"}