{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)3d853929-dfea-49d3-9ccd-f0b5d5e9e6d3","ParentGuid":"(Guid)00000000-0000-0000-0000-000000000000","Name":"(string)FB_ActivateDevices","Properties":{"@Type":"2c41fa04:IDictionary","@Value":[{"@Key":"(Guid)24568a24-c491-472c-a21f-ee5d33859fab","@Value":{"@Type":"24568a24","@Value":{"MemoryReserveForOnlineChange":"(int)0","ExcludeFromBuild":"(bool)False","External":"(bool)False","EnableSystemCall":"(bool)False","CompilerDefines":"(string)","LinkAlways":"(bool)False","Undefines":{"@Type":"[string]","@Value":[]}}}},{"@Key":"(Guid)829a18f2-c514-4f6e-9634-1df173429203","@Value":{"@Type":"829a18f2","@Value":{"ParentObjects":{"@Type":"fa2ee218:IDictionary","@Value":[{"@Key":"(Guid)21af5390-2942-461a-bf89-951aaf6999f1","@Value":"(Guid)04b9daf6-68ac-4905-b8ee-c893131273c2"}]}}}}]},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"24568a24":"{24568a24-c491-472c-a21f-ee5d33859fab}","2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","829a18f2":"{829a18f2-c514-4f6e-9634-1df173429203}","bool":"System.Boolean","fa2ee218":"{fa2ee218-a39b-4b6d-b249-49dbddbd168a}","Guid":"System.Guid","int":"System.Int32","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)\nIF IN_bExecute AND NOT bExecuteOld THEN\n\tbExecuteOld := TRUE;\n\tOUT_bActive := TRUE;\n\tOUT_bDone := FALSE;\n\tOUT_bError := FALSE;\t\n\tsDiagMessageInt := '';\n\tOUT_sDiagMessage :='';\n\t\n\t// Referenzen aktualisieren\n\trefastAxesCmdConfig REF= IN_stDeviceCmdConfig.astAxes;\n\trefastInlineIOCmdConfig REF= IN_stDeviceCmdConfig.astInlineIO;\n\trefastSercosIOCmdConfig\tREF= IN_stDeviceCmdConfig.astSercosIO;\n\trefastPNIOCmdConfig REF= IN_stDeviceCmdConfig.astPN_IO;\n\t\n\trefastAxesActConfig REF= IN_stDeviceActConfig.astAxes;\n//\tS20IOActConfig REF= DeviceActConfig.S20_IO;\n\trefastSercosIOActConfig\tREF= IN_stDeviceActConfig.astSercosIO;\n//\tPNIOActConfig REF= DeviceActConfig.PN_IO;\n\t\n\trefastAxesConfigError REF= IN_stDeviceConfigError.astAxes;\n\trefastSercosIOConfigError REF= IN_stDeviceConfigError.astSercosIO;\n//\tSercosIOCmdConfigError REF= DeviceConfigError.sercos_IO_CmdConfig;\n\trefastFoundDrivesError REF=\tIN_stDeviceConfigError.astFoundDrives;\n\trefastInlineIOConfigError REF= IN_stDeviceConfigError.astInlineIO;\n\t\n\tiState := 10;\nELSIF NOT IN_bExecute AND (OUT_bDone OR OUT_bError) THEN\n\tbExecuteOld := FALSE;\n\tOUT_bReboot := FALSE;\n\tOUT_bActive := FALSE;\n\tOUT_bDone := FALSE;\n\tOUT_bError := FALSE;\t\n\tiState := 0;\nEND_IF\n\n\n(* Now in Execute-Method\nIF iState >= 10 AND iState < 100 THEN \n\tTHIS^.M_0ReadActConfig();\nELSIF iState >= 1000 AND iState < 1100 THEN\n//\tact11_DownloadDriveFirmware();\t\t\t\t// Execute this Action in a different Task\n \tiState := 100; \nELSIF iState >= 100 AND iState < 200 THEN\n\tTHIS^.M_1ConfigAxes();\nELSIF iState >= 200 AND iState < 300 THEN\n\tTHIS^.M_2ConfigSercosIO();\nELSIF iState >= 300 AND iState < 400 THEN\n\tTHIS^.M_3ConfigInlineIO();\t\nELSIF iState >= 400 AND iState < 500 THEN\n\tTHIS^.M_4ConfigProfibsIO();\nELSIF iState >= 500 AND iState < 600 THEN\n\tiState := 800;\nELSIF iState >= 800 AND iState < 900 THEN\n\tTHIS^.M_8WriteConfig();\nELSIF iState >= 900 AND iState < 1000 THEN\n\tTHIS^.M_9ErrorDone();\nEND_IF\t\n*)","LineInfoPersistence":"(string)3d853929-dfea-49d3-9ccd-f0b5d5e9e6d3_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)///Program ActivateDevices\n/// \t\n///\t                                 ******************\n///                                     *   DISCLAIMER   *\n///                                     ******************\n///   It is acknowledged that with regard to these software programs and program modules free of\n///   charge, Bosch Rexroth's usually practised, in-house test and release procedures have not \n///   been accomplished. These software programs and program modules free of charge serve only as\n///   an example for possible applications.  They are intended as a help in order to obtain addi-\n///   tional experience regarding function, operation, performance and capacity of a maybe later \n///   issued series release. Therefore Bosch Rexroth disclaims any liability and rejects to assume\n///   responsibility that these software programs or program modules, including any information \n///   and data stored in those programs, are suitable for any intended use or that these programs\n///   will work without errors in any combination with the data processing environment. Providing \n///   you with these software programs shall neither constitute a claim for technical support nor\n///   for any other remedy for defects. Any claims for damages of any nature and for any legal\n///   reason arising from installing or using these software programs or program modules are ex-\n///   cluded, unless these damages was caused by Bosch Rexroth`s statutory representatives or em-\n///   ployees by wilful misconduct or by gross negligence or liability is compulsory in accordance\n///   with the German product liability law. In any case Bosch Rexroth`s liability for any conse-\n///   quential or incidental damages such as, but not limited to loss of profit, loss of pro-\n///   duction or loss of data is excluded.      \n///\n///##############################################################################################\n///##############################################################################################\n///\n///General Header\n///----------------------------------------------------------------------------------------------\n///Short description      : active and passive handling for drives, sercos IO, PN IO \n///\t\t\t\t\t\t and local S20 IO with XM control\n///Version                : 14.8.XM\n///Author                 : Jörg Schneider\n///Date                   : 2019-10-24 \n///Company                : DC-AE/STS2\n///Target                 : MLC 14VRS\n///----------------------------------------------------------------------------------------------\n/// Additional Header \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///----------------------------------------------------------------------------------------------\n/// Used Libraries \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t- Util.library\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t- SysFileAsync23.library\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t- SysDir.library\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t- CmpErrors.library\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t- SysTypes.library\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t- ML_TechBase.library \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///      - RIL_Inline.library\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///      - RIL_InlineIOModules.library\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///      - RIH_IndraControl_S20.library\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///##############################################################################################\n///##############################################################################################\n///\t\tPossible Errors \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\tERROR_CODE\t\t\tERROR_TABLE\t\tAdd1\t\tAdd2\t\tDescription\t\t\t\t\t\n///----------------------------------------------------------------------------------------------\n///\t\tRESOURCE_ERROR\t\tUSER1_TABLE\t\t16#F0001\t16#F0000\tdifference between found \t\n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tand configured drives.\t\t\n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSee Output DeviceConfigError.Axes\t\n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\tRESOURCE_ERROR\t\tUSER1_TABLE\t\t16#F0002\t16#F0000\tdrive found which is not in \n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tC-0-0478 \t\t\t\t\t\n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSee Output DeviceConfigError.FoundDrives\t\n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\tRESOURCE_ERROR\t\tUSER1_TABLE\t\t16#F0003\t16#F0000\tError in sercos IO configuration \n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSee Output DeviceConfigError.sercos_IO\t\n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\tRESOURCE_ERROR\t\tUSER1_TABLE\t\t16#F0004\t16#F0000\tError in sercos IO configuration \n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSee Output DeviceConfigError.sercos_IO_CmdConfig\t\n///\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///----------------------------------------------------------------------------------------------\n/// History\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///----------------------------------------------------------------------------------------------\n/// Version:\t\t14.1.0 \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Date: \t\t2016-10-17\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Name: \t\tJörg Schneider (DC-IA/SDF61) \t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Comment:\t\tFirst Release for MLC 14\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Version:\t\t14.2.0 \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Date: \t\t2017-02-27\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Name: \t\tJörg Schneider (DC-IA/SDF61) \t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Comment:\t\tInclude replacement for UIL_StringHandling.library\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Version:\t\t14.3.0 \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Date: \t\t2017-12-06\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Name: \t\tJörg Schneider (DC-IA/SDF61) \t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Comment:\t\tremove UIL_StringHandlingReplacement \t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Version:\t\t14.4.0 \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Date: \t\t2018-02-21\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Name: \t\tJürgen Kohl (DC-AE/STS2) \t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Comment:\t\tIn state 40:\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t\t\t\"IF udiNoOfElements2 > 7 THEN\" replaced with \"IF udiNoOfElements > 7 THEN\"\t\t\n///\t\t\t\tIn state 290:\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n///\t\t\t\tadditional Concat sequence inserted to get the whole error message\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Version:\t\t14.5.XM\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Date: \t\t2019-03-05\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Name: \t\tJörg Schneider (DC-AE/STS2) \t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Comment:\t\tremove inline, PROFINET and sercos i/o handling for XM control\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Version:\t\t14.6.XM\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Date: \t\t2019-03-12\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Name: \t\tJörg Schneider (DC-AE/STS2) \t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Comment:\t\tadd sercos i/o handling for XM control\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\tremove SysFileStream23.library\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Version:\t\t14.7.XM\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Date: \t\t2019-03-25\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Name: \t\tJörg Schneider (DC-AE/STS2) \t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Comment:\t\tadd EFC FUN_TypeCodeIsRexrothIO\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\tchange get TypeCode of sercos IO in step 40 \t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Version:\t\t14.8.XM\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Date: \t\t2019-11-15\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Name: \t\tJörg Schneider (DC-AE/STS2) \t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Comment:\t\tadd local S20 IO handling\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// \t\t\t\tadd PN IO handling\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\n/// \t\t\t\textend DUT_S20Type\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\n/// \t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/// Former Programm, now FB to get it into a library                                             \n/// Date: 04.04.2025                                                                             \n/// Name: Dirk Süß                                                                               \n///                                                                                              \nFUNCTION_BLOCK FB_ActivateDevices IMPLEMENTS ITF_ActivateDevices\nVAR_OUTPUT\n\t/// FB is active\n\tOUT_bActive: BOOL;\n\t/// FB is finished\n\tOUT_bDone: BOOL;\n\t/// FB has an Error\n\tOUT_bError: BOOL;\n\t/// Reboot of MLC required\n\tOUT_bReboot: BOOL;\n\tOUT_ErrorID: ERROR_CODE;\n\tOUT_ErrorIdent: ERROR_STRUCT;\n\t/// First Error is described in Message \t\n\tOUT_sDiagMessage: STRING(255);\nEND_VAR\nVAR\n\t/// Update Drive fimrware and Functional Package if needed\n\tbUpdateFirmware: BOOL := FALSE;\n\trefastAxesCmdConfig: REFERENCE TO ARRAY [1..iMAX_AXES_NUMBER] OF ST_AxesCmdConfig;\n\trefastInlineIOCmdConfig: REFERENCE TO ARRAY [1..iMAX_S20_IO] OF ST_InlineIOCmdConfig;\n\trefastSercosIOCmdConfig: REFERENCE TO ARRAY [1..iMAX_SERCOS_IO] OF ST_SercosIOCmdConfig;\n\trefastProfibusIOCmdConfig: REFERENCE TO ARRAY [1..iMAX_PROFIBUS_MASTER, 0..iMAX_PROFIBUS_SLAVE] OF ST_ProfibusIOCmdConfig;\n\trefastPNIOCmdConfig: REFERENCE TO ARRAY [1..iMAX_PN_MASTER, 0..iMAX_PN_SLAVE] OF ST_PNIOCmdConfig;\n\trefastAxesActConfig: REFERENCE TO ARRAY [1..iMAX_AXES_NUMBER] OF ST_AxesActConfig;\n\trefastInlineIOActConfig: REFERENCE TO ARRAY [1..iMAX_INLINE_IO] OF ST_InlineIOActConfig;\n\trefastSercosIOActConfig: REFERENCE TO ARRAY [1..iMAX_SERCOS_IO] OF ST_SercosIOActConfig;\n\trefastSercosIOActConfigC578: ARRAY[1..iMAX_SERCOS_IO] OF ST_SercosIOActConfig;\n\t///\tPNIOActConfig :REFERENCE TO ARRAY [1..MAX_PN_MASTER,1..MAX_PN_SLAVE] OF DUT_PNIOActConfig;\n\trefastAxesConfigError: REFERENCE TO ARRAY [1..iMAX_AXES_NUMBER] OF ST_AxesConfigError;\n\trefastSercosIOConfigError: REFERENCE TO ARRAY [1..iMAX_SERCOS_IO] OF ST_SercosIOConfigError;\n\t///\tSercosIOCmdConfigError\t\t: REFERENCE TO DUT_SercosIOCmdConfigError;\n\trefastInlineIOConfigError: REFERENCE TO ARRAY [1..iMAX_INLINE_IO] OF ST_InlineIOConfigError;\n\trefastFoundDrivesError: REFERENCE TO ARRAY [1..iMAX_AXES_NUMBER] OF ST_AxesConfigErrorFoundDrives;\n\tstDummyAxesActConfig: ST_AxesActConfig;\n\tastAxesActConfigTmp: ARRAY[1..iMAX_AXES_NUMBER] OF ST_AxesActConfig;\n\tastSercosIOActConfigTmp: ARRAY[1..iMAX_SERCOS_IO] OF ST_SercosIOActConfig;\n\tbExecuteOld: BOOL;\n\tbErrorTemp: BOOL;\n\t{ warning '###TODO: Für Sercos, muss in ctrlX auf Ethercat umgebaut werden' }\n\t(* Für Sercos, muss in ctrlX auf Ethercat umgebaut werden\n\tfbCommand: MB_Command;\n\tfbReadListParameter: MB_ReadListParameter;\n\tfbWriteListParameter: MB_WriteListParameter;\n\tfbWriteA24: MB_WriteParameter;\n\t*)\n\tstDummyAxis: AXIS_REF;\n\tiState: INT;\n\tiA24: INT;\n\ti: INT;\n\tj: INT;\n\tk: INT;\n\tl: INT;\n\tm: INT;\n\tuiLengthArC510: UINT;\n\taiC484: ARRAY[1..(2 * iMAX_AXES_NUMBER)] OF INT;\n\taiC510: ARRAY[1..iMAX_SERCOS_DEVICES] OF INT;\n\tapiPointerToC510: ARRAY[1..iMAX_SERCOS_DEVICES] OF POINTER TO INT;\n\tsRingString: STRING((100 * iMAX_SERCOS_DEVICES));\n\tsC578: STRING((100 * iMAX_SERCOS_DEVICES));\n\tsRingString2: STRING((100 * iMAX_SERCOS_DEVICES));\n\tsTemp: STRING(20);\n\tpsString: POINTER TO STRING;\n\tpsRingString2: POINTER TO STRING(120);\n\tpsStringTemp: POINTER TO STRING;\n\t/// array of all axis elements\n\tapsElements: ARRAY[1..(iMAX_SERCOS_DEVICES * iMAX_NUM_ELEMENTS_C479)] OF POINTER TO STRING(255);\n\t///Temp string to prepare elements\n\tapsElements2: ARRAY[1..20] OF POINTER TO STRING(255);\n\t/// array of all axis elements\n\tapsSplit: ARRAY[1..(iMAX_SERCOS_DEVICES * iMAX_NUM_ELEMENTS_C479)] OF POINTER TO STRING(255);\n\tasAxisString: ARRAY[1..iMAX_SERCOS_DEVICES] OF STRING;\n\tpbByteTemp: POINTER TO BYTE;\n\tpbByteTemp2: POINTER TO BYTE;\n\t/// Add FB\n\tfbReadStringParameter: MB_ReadStringParameter;\n\t/// TODO: Add FB\n\tWriteC578: MB_WriteListParameter;\n\tbExecuteReadName: BOOL;\n\tsTemp1: STRING;\n\tsTemp2: STRING;\n\tsTemp3: STRING;\n\tsComma: STRING;\n\tsSercosAdress: STRING;\n\tsDiagMessageInt: STRING(255);\n\tiSercosAddressTemp: INT;\n\tiActConfigInlineIO: INT;\n\tiActNoOfDrives: INT;\n\tiActNoOfSercosIO: INT;\n\tiLineCfg: INT;\n\tasStringCmdCfg: ARRAY[1..iMAX_LINE_CFG] OF STRING(80);\n\tasStringActCfg: ARRAY[1..iMAX_LINE_CFG] OF STRING(80);\n\tfb_SysFileOpenAsync: SysFileOpenAsync;\n\thCfg: DWORD;\n\tsBuffer: STRING(iMAX_BUFFER_SIZE);\n\tfb_SysFileReadAsync: SysFileReadAsync;\n\tfb_SysFileCloseAsync: SysFileCloseAsync;\n\tiFileSize: INT := iMAX_BUFFER_SIZE;\n\tdwReadBytes: DWORD;\n\tsLineFeed: STRING(1);\n\tsLineFeed2: STRING(2);\n\tbExecuteWriteA24: BOOL;\n\tiEOF: INT;\n\tdiResult: DINT;\n\tastDirEntry: ARRAY[0..iMAX_DIR_ENTRY] OF ST_DirEntry;\n\tiEntry: INT;\n\tdiMaxEntry: DINT;\n\tdir: DirInfo;\n\tResult: RTS_IEC_RESULT;\n\thDir: RTS_IEC_HANDLE;\n\tbLoopend: BOOL;\n\tfbINLNModuleConfigList: IL_INLNModuleConfigList;\n\tInlineIOCfg: ARRAY[1..iMAX_INLINE_IO] OF IL_INLINE_CFG_ID_DESC;\n\tudiNoOfModuleConfig: UDINT;\n\tsPathNameInt: STRING := sPATH_NAME;\n\tsFileAndPathInt: STRING := sFILE_AND_PATH;\n\t/// Read Serial\n\tbExecuteReadSerialNo: BOOL;\n\taudiP1518: ARRAY[0..7] OF UDINT;\n\t/// Read SafetyType\n\tbExecuteReadSafetyType: BOOL;\n\t/// Read S20 ModuleType\n\tbExecuteReadModuleType: BOOL;\n\taliS1500_0_3: ARRAY[0..63] OF LINT;\n\tbWriteThisLine: BOOL;\n\t/// Variable for Read Fimware Directory\n\t///--------------------------------------\n\tsTemp4: STRING;\n\tastDirInfo: ARRAY[1..99] OF DirInfo;\n\tudiResultOpen: UDINT;\n\t///\tar_sFirmwareFiles \t\t\t: ARRAY [1..MAX_NO_FIRMWARE_FILES] OF STRING(99);\t\n\t///\tar_stFirmwareFilesType \t\t: ARRAY [1..MAX_NO_FIRMWARE_FILES] OF DUT_FirmwareType;\t\n\t///\tsFirmwareDirectoryTemp\t\t: STRING := '/ata0b/DriveFirmware';\n\t///\tudiDirHandle: RTS_IEC_HANDLE;\n\t///\tuiNoOfFimrwareFiles : UINT;\n\tuiFileNo: UINT;\n\tudiResultRead: RTS_IEC_RESULT;\n\tstActFirmwareType: ST_FirmwareType;\n\tar_bFirmwareUpdate: ARRAY[1..iMAX_AXES_NUMBER] OF BOOL;\n\tar_uiUpdateFileNo: ARRAY[1..iMAX_AXES_NUMBER] OF UINT := [iMAX_AXES_NUMBER(1)];\n\tuiNoOfFirmwareFiles: UINT;\n\tstCmdFirmwareType: ST_FirmwareType;\n\t///\tfbTFTPPutFileAsync: ARRAY[1..MAX_AXES_NUMBER] OF IL_TFTPPutFileAsync;\n\tafbWriteP2003: ARRAY[1..iMAX_AXES_NUMBER] OF MB_WriteParameter;\n\tabDriveIP: ARRAY[0..3] OF BYTE;\n\tbScanAgain: BOOL;\n\tabWriteP2003: ARRAY[1..iMAX_AXES_NUMBER] OF BOOL;\n\tbRebootDrive: BOOL;\n\tfbCommandRebootDrive: ARRAY[1..iMAX_AXES_NUMBER] OF MB_Command;\n\tfbWaitReboot: TON;\n\tiP2003: INT;\n\t///fbReset: ARRAY[1..MAX_AXES_NUMBER] OF MC_Reset;\n\tfbResetMLC: MC_Reset;\n\twTemp: WORD;\n\tfbWriteC506: MB_WriteParameter;\n\tudiResutlCreate: RTS_IEC_RESULT;\n\tdwC506: DWORD;\n\tbIOFound: BOOL;\n\tabSercosIOFoundInConfig: ARRAY[1..iMAX_SERCOS_IO] OF BOOL;\n\tudiNoOfElements: UDINT;\n\tudiNoOfElements2: UDINT;\n\tuiBufferPos: UINT;\n\tfbFileWriteAsync: SysFileWriteAsync;\nEND_VAR\nVAR_INPUT\n\t/// start FB\n\tIN_bExecute: BOOL;\n\t/// Check if found axes = configured axes.\n\tIN_bCheckAxesConfig: BOOL := FALSE;\n\t/// Check if found sercos IO = configured sercos IO.\n\tIN_bCheckSercosIOConfig: BOOL := FALSE;\n\t/// Check if found module on sercos IO = configured module on sercos IO.\n\tIN_bCheckSercosIOModuleConfig: BOOL := FALSE;\n\t/// Check if found Inline IO = configured Inline IO.\n\tIN_bCheckInlineIOConfig: BOOL := FALSE;\n\t/// Write Sercos Address to IO\n\tIN_bWriteSercosIOAddress: BOOL := FALSE;\n\t/// Write Axes configuration to A-0-0024 \n\tIN_bConfigAxes: BOOL := FALSE;\n\t/// Write sercos IO configuration to C-0-0478 and UserDefs.cfg\n\tIN_bConfigSercosIO: BOOL := FALSE;\n\t/// Write Inline IO configuration to UserDefs.cfg\t\n\tIN_bConfigInlineIO: BOOL := FALSE;\n\t/// Write Profibus IO configuration to UserDefs.cfg\n\tIN_bConfigProfibusIO: BOOL := FALSE;\n\t/// Write Profinet IO configuration to UserDefs.cfg\n\tIN_bConfigPNIO: BOOL := FALSE;\n\t/// Reboot automatically if necessary\n\tIN_bRebootAuto: BOOL := FALSE;\n\t/// Command Configuration of Devices\n\tIN_stDeviceCmdConfig: REFERENCE TO ST_DeviceCmdConfig;\n\t/// actual Configuration of Devices\n\tIN_stDeviceActConfig: REFERENCE TO ST_DeviceActConfig;\n\tIN_stDeviceConfigError: REFERENCE TO ST_DeviceConfigError;\nEND_VAR\n","LineInfoPersistence":"(string)3d853929-dfea-49d3-9ccd-f0b5d5e9e6d3_Decl_LineIds"}}}},"UniqueIdGenerator":"(string)381","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}